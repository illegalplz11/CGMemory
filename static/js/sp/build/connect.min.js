/* build date: 2022-08-16 07:18 */

!function(e,t){"function"==typeof define&&define.amd?define(t):e.H5F=t()}(this,function(){var c,o,r,d,s,i=document.createElement("input"),a=/^[a-zA-Z0-9.!#$%&'*+-\/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,u=/[a-z][\-\.+a-z]*:\/\//i,l=/^(input|select|textarea)$/i,e=function(e,t){var n=!e.nodeType||!1,i={validClass:"valid",invalidClass:"error",requiredClass:"required",placeholderClass:"placeholder"};if("object"==typeof t)for(var o in i)void 0===t[o]&&(t[o]=i[o]);if(s=t||i,n)for(var r=0,a=e.length;r<a;r++)p(e[r]);else p(e)},p=function(t){var e=t.elements,n=e.length,i=!!t.attributes.novalidate;if(k(t,"invalid",f,!0),k(t,"blur",f,!0),k(t,"input",f,!0),k(t,"keyup",f,!0),k(t,"focus",f,!0),k(t,"change",f,!0),k(t,"click",v,!0),k(t,"submit",function(e){c=!0,o||i||t.checkValidity()||I(e)},!1),!b())for(t.checkValidity=function(){return m(t)};n--;)e[n].attributes.required,"fieldset"!==e[n].nodeName.toLowerCase()&&g(e[n])},g=function(e){var t=e,n=_(t),i={type:t.getAttribute("type"),pattern:t.getAttribute("pattern"),placeholder:t.getAttribute("placeholder")},o=/^(email|url)$/i.test(i.type)?i.type:i.pattern||!1,r=y(t,o),a=w(t,"step"),s=w(t,"min"),e=w(t,"max"),o=!(""===t.validationMessage||void 0===t.validationMessage);t.checkValidity=function(){return m.call(this,t)},t.setCustomValidity=function(e){h.call(t,e)},t.validity={valueMissing:n,patternMismatch:r,rangeUnderflow:s,rangeOverflow:e,stepMismatch:a,customError:o,valid:!(n||r||a||s||e||o)},i.placeholder&&!/^(input|keyup)$/i.test(d)&&E(t)},f=function(e){var t=S(e)||e,n=/^(submit|image|button|reset)$/i,i=!0;!l.test(t.nodeName)||n.test(t.type)||n.test(t.nodeName)||(d=e.type,b()||g(t),t.validity.valid&&(""!==t.value||/^(checkbox|radio)$/i.test(t.type))||t.value!==t.getAttribute("placeholder")&&t.validity.valid?(B(t,[s.invalidClass,s.requiredClass]),C(t,s.validClass)):/^(input|keyup|focusin|focus|change)$/i.test(d)?t.validity.valueMissing&&B(t,[s.requiredClass,s.invalidClass,s.validClass]):t.validity.valueMissing?(B(t,[s.invalidClass,s.validClass]),C(t,s.requiredClass)):t.validity.valid||(B(t,[s.validClass,s.requiredClass]),C(t,s.invalidClass)),"input"===d&&i&&A(t.form,"keyup",f,!0))},m=function(e){var t,n,i,o=!1;if("form"!==e.nodeName.toLowerCase())return f(e),e.validity.valid;for(var r,a=0,s=(r=e.elements).length;a<s;a++)n=!!(t=r[a]).attributes.required,i=!!t.attributes.pattern,"fieldset"!==t.nodeName.toLowerCase()&&(n||i&&n)&&(f(t),t.validity.valid||o||(c&&t.focus(),o=!0));return!o},h=function(e){this.validationMessage=e},v=function(e){e=S(e);e.attributes.formnovalidate&&"submit"===e.type&&(o=!0)},b=function(){return L(i,"validity")&&L(i,"checkValidity")},y=function(e,t){if("email"===t)return!a.test(e.value);if("url"===t)return!u.test(e.value);if(t){var n=e.getAttribute("placeholder"),i=e.value;return r=RegExp("^(?:"+t+")$"),i!==n&&(""!==i&&!r.test(e.value))}return!1},E=function(e){var t={placeholder:e.getAttribute("placeholder")},n=/^(focus|focusin|submit)$/i;!("placeholder"in i)&&/^(input|textarea)$/i.test(e.nodeName)&&!/^password$/i.test(e.type)&&(""!==e.value||n.test(d)?e.value===t.placeholder&&n.test(d)&&(e.value="",B(e,s.placeholderClass)):(e.value=t.placeholder,k(e.form,"submit",function(){d="submit",E(e)},!0),C(e,s.placeholderClass)))},w=function(e,t){var n=parseInt(e.getAttribute("min"),10)||0,i=parseInt(e.getAttribute("max"),10)||!1,o=parseInt(e.getAttribute("step"),10)||1,r=parseInt(e.value,10),o=(r-n)%o;return _(e)||isNaN(r)?"number"===e.getAttribute("type"):"step"===t?!!e.getAttribute("step")&&0!=o:"min"===t?!!e.getAttribute("min")&&r<n:"max"===t?!!e.getAttribute("max")&&i<r:void 0},_=function(e){var t=e.getAttribute("placeholder");return!(!!!e.attributes.required||""!==e.value&&e.value!==t&&(!/^(checkbox|radio)$/i.test(e.type)||n(e)))},k=function(e,t,n,i){L(window,"addEventListener")?e.addEventListener(t,n,i):L(window,"attachEvent")&&void 0!==window.event&&("blur"===t?t="focusout":"focus"===t&&(t="focusin"),e.attachEvent("on"+t,n))},A=function(e,t,n,i){L(window,"removeEventListener")?e.removeEventListener(t,n,i):L(window,"detachEvent")&&void 0!==window.event&&e.detachEvent("on"+t,n)},I=function(e){(e=e||window.event).stopPropagation&&e.preventDefault?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1)},S=function(e){return(e=e||window.event).target||e.srcElement},C=function(e,t){e.className?RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t):e.className=t},B=function(e,t){var n,i,o="object"==typeof t?t.length:1,r=o;if(e.className)if(e.className===t)e.className="";else for(;o--;)n=RegExp("(^|\\s)"+(1<r?t[o]:t)+"(\\s|$)"),(i=e.className.match(n))&&3===i.length&&(e.className=e.className.replace(n,i[1]&&i[2]?" ":""))},L=function(e,t){var n=typeof e[t];return!!(RegExp("^function|object$","i").test(n)&&e[t]||"unknown"==n)},n=function(e){for(var t=document.getElementsByName(e.name),n=0;t.length>n;n++)if(t[n].checked)return!0;return!1};return{setup:e}}),function(){var o={requestCount:0,tooManyRequestsThreshold:50,request:function(t,n){if(o.requestCount++>o.tooManyRequestsThreshold)n(new r.HTTPError({status:429,body:"Too many requests"}));else{var e,i=new XMLHttpRequest;if(i.onload=function(){var e,t=o.parseResponseHeaders(i.getAllResponseHeaders());if(200<=i.status&&i.status<=299){try{e=JSON.parse(i.responseText)}catch(e){return void n(void 0,{status:i.status,headers:t,body:i.responseText})}n(void 0,{status:i.status,headers:t,body:e})}else{try{e=JSON.parse(i.responseText)}catch(e){return void n(new r.HTTPError({status:i.status,headers:t,body:i.responseText}))}n(new r.HTTPError({status:i.status,headers:t,body:e}))}},i.open(t.method,t.url,!0),t.withCredentials&&(i.withCredentials=t.withCredentials),Object.keys(t.headers).forEach(function(e){i.setRequestHeader(e,t.headers[e])}),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),"GET"===t.method||"DELETE"===t.method)i.send();else{try{e=JSON.stringify(t.parameters)}catch(e){return void n(new r.HTTPError({status:400,headers:null,body:"Invalid JSON request"}))}i.setRequestHeader("Content-Type","application/json"),i.send(e)}}},parseResponseHeaders:function(e){return e.split("\n").map(function(e){var t=e.indexOf(":");return[e.substring(0,t),e.substring(t+1)]}).reduce(function(e,t){return 0<t[0].length&&(e[t[0]]=t[1].trim()),e},{})}},r={};function t(e){var t;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):(t=new Error).stack&&(this.stack=t.stack),this.message=e||""}function e(e){t.call(this,e.body),this.status=e.status,this.headers=e.headers||{},this.body=e.body||""}function n(e){t.call(this,e.detail),this.httpStatus=e.httpStatus,this.title=e.title,this.detail=e.detail}t.prototype.name="CustomError",e.prototype.name="HTTPError",n.prototype.name="APIError",r.HTTPError=e,r.APIError=n,o.error=r,this.http=o}(),function(){var t=/:([\w\d]+)/g,n=/\*([\w\d]+)/g,i=/[\-\[\]{}()+?.,\\\^$|#\s]/g,o=Object.prototype.toString;function e(){this.routes=[]}e.prototype={register:function(e,t){var n;n=e,"[object RegExp]"!=o.call(n)&&(e=this._compileRoute(e)),this.routes.push([e,t])},dispatch:function(e){for(var t=0,n=this.routes.length;t<n;t++){var i=this.routes[t][0],o=this.routes[t][1],i=i.exec(e);i&&(i=i.slice(1),o.apply(this,i))}},_compileRoute:function(e){return e=e.replace(i,"\\$&").replace(t,"([^/]+)").replace(n,"(.*?)"),new RegExp("^"+e+"$")}},this.MicroDispatcher=e}();var CryptoJS=CryptoJS||function(s){function n(){}var e={},t=e.lib={},i=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var o=0;o<e;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),o=e.enc={},r=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},u=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o),r=e?s.ceil(r):s.max((0|r)-this._minBufferSize,0),i=s.min(4*(e=r*o),i);if(e){for(var a=0;a<e;a+=o)this._doProcessBlock(n,a);a=n.splice(0,e),t.sigBytes-=i}return new c.init(a,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new l.HMAC.init(n,t).finalize(e)}}});var l=e.algo={};return e}(Math);!function(o){function e(e){return 4294967296*(e-(0|e))|0}for(var t=CryptoJS,n=(r=t.lib).WordArray,i=r.Hasher,r=t.algo,a=[],f=[],s=2,c=0;c<64;){e:{for(var d=s,u=o.sqrt(d),l=2;l<=u;l++)if(!(d%l)){d=!1;break e}d=!0}d&&(c<8&&(a[c]=e(o.pow(s,.5))),f[c]=e(o.pow(s,1/3)),c++),s++}var m=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n,i,o=this._hash.words,r=o[0],a=o[1],s=o[2],c=o[3],d=o[4],u=o[5],l=o[6],p=o[7],g=0;g<64;g++)g<16?m[g]=0|e[t+g]:(n=m[g-15],i=m[g-2],m[g]=((n<<25|n>>>7)^(n<<14|n>>>18)^n>>>3)+m[g-7]+((i<<15|i>>>17)^(i<<13|i>>>19)^i>>>10)+m[g-16]),n=p+((d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25))+(d&u^~d&l)+f[g]+m[g],i=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&a^r&s^a&s),p=l,l=u,u=d,d=c+n|0,c=s,s=a,a=r,r=n+i|0;o[0]=o[0]+r|0,o[1]=o[1]+a|0,o[2]=o[2]+s|0,o[3]=o[3]+c|0,o[4]=o[4]+d|0,o[5]=o[5]+u|0,o[6]=o[6]+l|0,o[7]=o[7]+p|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=o.floor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(r),t.HmacSHA256=i._createHmacHelper(r)}(Math);var connect={pages:{},chromeapps:{}};!function(){"use strict";var i={generateNotificationMessage:function(e){var t,n={},i=document.getElementById("mobage-connect-analytics");return i&&(t=new Date,n.sdk_type=i.getAttribute("data-sdkName"),n.sdk_ver=i.getAttribute("data-sdkVersion"),n.app_id=i.getAttribute("data-appId"),n.uid=i.getAttribute("data-userId"),n.nbpf_tracking_cookie=i.getAttribute("data-trackingCookie"),n.is_installed=i.getAttribute("data-isInstalled"),n.event_id=e,n.src_type="PC",n.client_ts=t.getTime(),n.payload={}),n},retrieveAnalyticsEndpoint:function(){var e=document.getElementById("mobage-connect-analytics");return e?e.getAttribute("data-analyticsEndpoint"):null},notify:function(e){var t=i.generateNotificationMessage(e),n=i.retrieveAnalyticsEndpoint();n&&((e=new XMLHttpRequest).open("POST",n,!0),e.setRequestHeader("Content-type","text/plain"),e.send(JSON.stringify(t)))}};connect.analyticsOld=i}(this.self||global),function(){"use strict";var a={},n="analytics_events";a.sendEvent=function(e){var t,n,i,o,r;e?(t=document.getElementById("mobage-connect-app-environment").getAttribute("content"),n=document.getElementById("mobage-connect-app-action-id").getAttribute("content"),i=document.getElementById("mobage-connect-app-user-id").getAttribute("content"),o=document.getElementById("mobage-connect-app-tracking-cookie").getAttribute("content"),r=document.getElementById("mobage-connect-app-responded-at").getAttribute("content"),e={environment:t,appName:"mobage-connect",actionId:n,userId:i,trackingCookie:o,event:e,responsedAt:parseInt(r),firedAt:Math.floor((new Date).getTime()/1e3)},connect.platform.isiOSShellAppSDK()||connect.platform.isAndroidShellAppSDK()||connect.platform.isAndroidShellAppSDKExternalBrowser()?a.saveEvent(e):!(r=document.getElementById("mobage-connect-app-client-origin-uri"))||(r=r.getAttribute("content"))&&connect.notification.send(e,{topic:"analytics",originUri:r,windowClose:!1,callerFocus:!1})):console.error("analytics.sendEvent: event is not specified")},a.saveEvent=function(e){var t=a.restoreEvents();t.push(e),connect.storage.setItem(n,t)},a.restoreEvents=function(){return connect.storage.getItem(n)||[]},a.clearEvents=function(){connect.storage.removeItem(n)},connect.analytics=a}(),function(){"use strict";var s={},e="redirect_completed";s.redirect=function(){if(!s.isMarkedRedirectCompleted()){var t={},e=document.getElementById("mobage-connect-app-shellapp-sdk-android-redirect-redirector-params"),n=e.getAttribute("data-query-string");n&&(t=connect.util.decodeQuery("&",n.substr(1)));var i=location.hash;if(i){var o,r=connect.util.decodeQuery("&",i.substr(1));for(o in r)t[o]=r[o]}var a={};["code","id_token","access_token","token_type","expires_in","state","session_state","scope","topic","sdk_name","sdk_version","error","error_description","grade"].forEach(function(e){t[e]&&(a[e]=t[e])});n=s.getAnalyticsEvents();n&&(a.analytics_events=n),connect.analytics.clearEvents();i=e.getAttribute("data-client-identifier"),n=t.package,e=t.topic||"authorization_response",e=s.getPathFromTopic(e),e=s.buildIntentSchemeURI(i,n,e,a);s.markRedirectCompleted(),location.href=e}},s.getPathFromTopic=function(e){return{authorization_response:"authorization_response_callback",authorization_error_response:"authorization_response_callback",uninstall_response:"uninstall_response_callback",uninstall_error_response:"uninstall_response_callback",logout_response:"logout_response_callback",logout_error_response:"logout_response_callback",user_upgrade_response:"user_upgrade_response_callback",user_upgrade_error_response:"user_upgrade_response_callback"}[e]},s.buildIntentSchemeURI=function(e,t,n,i){n="intent://"+e+"/"+n;return i&&(n+="?"+connect.util.encodeQuery("&",i)),n+="#Intent;package="+t+";scheme=mobage-client;end;"},s.markRedirectCompleted=function(){location.hash=e},s.isMarkedRedirectCompleted=function(){return location.hash.substr(1)===e},s.getAnalyticsEvents=function(){var t=connect.analytics.restoreEvents();try{return connect.util.encodeBase64URL(JSON.stringify(t))}catch(e){return console.log("JSON parse error: events = ",t),null}},connect.androidRedirector=s}(this.self||global),function(){"use strict";var e={disableButtonsOnSubmit:function(e){var t;(e="string"==typeof e?document.getElementById(e):e)&&(t=e.querySelectorAll('button,input[type="submit"],input[type="image"]'),e.addEventListener("submit",function(){setTimeout(function(){Array.prototype.forEach.call(t,function(e){e.setAttribute("disabled",!0)})},0)}))},addMultiEventsListener:function(t,e,n){e.forEach(function(e){t.addEventListener(e,n)})}};connect.chrome=e}(),function(){"use strict";var i={};i.redirectWithFederation=function(){var e=document.getElementById("mobage-connect-login-iframe");if(!e)return!1;function t(e){e.origin===n.iframeOrigin&&(e.data.error&&console.log("error",e.data.error),location.href=n.postLoginRedirectUri)}var n=i.getDataAttributes(e);window.addEventListener("message",t,!1),i.embedIframe(e,n.iframeUri),window.setTimeout(function(){window.removeEventListener("message",t),location.href=n.postLoginRedirectUri},n.timeout||3e3)},i.getDataAttributes=function(e){return e||(location.href="/"),{timeout:1e3*e.getAttribute("data-timeoutSec"),iframeUri:e.getAttribute("data-iframeUri"),iframeOrigin:e.getAttribute("data-iframeOrigin"),postLoginRedirectUri:e.getAttribute("data-postLoginRedirectUri")}},i.embedIframe=function(e,t){var n=document.createElement("iframe");n.src=t,n.style.display="none",e.appendChild(n)},connect.loginIframe=i}(this.self||global),function(){"use strict";var i={},o="mobage-connect-logout-iframe";i.attrs=null,i.createIframe=function(){var e=document.getElementById(o);if(!e)return!1;var t=i.getDataAttributes(e),n=document.createElement("iframe");n.src=t.iframeUrl,e.appendChild(n),i.attrs=t,window.setTimeout(function(){i.redirect(e)},5e3)},i.redirect=function(e){var t=(e=e||document.getElementById(o))?i.getDataAttributes(e):i.attrs,e=t.postLogoutRedirectUri;t.topicParams&&(e+="?"+t.topicParams),window.location.href=e},i.getDataAttributes=function(e){e||(window.location.href="/");var t={idTokenHint:e.getAttribute("data-idTokenHint"),iframeUrl:e.getAttribute("data-iframeUrl"),postLogoutRedirectUri:e.getAttribute("data-postLogoutRedirectUri")};return e.getAttribute("data-topicParams")&&(t.topicParams=e.getAttribute("data-topicParams")),t},connect.logoutIframe=i}(this.self||global),function(){"use strict";var n={};n.getCSRFToken=function(){var e=document.getElementById("mobage-connect-app-csrf-token");return e?e.getAttribute("content"):null},n.embedCSRFTokenToAnchor=function(e,t){var n=e.search.substring(1).split("&");n.push("csrf_token="+t),e.search="?"+n.filter(function(e){return""!==e}).join("&")},n.embedCSRFTokenToForm=function(e,t){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","csrf_token"),n.setAttribute("value",t),e.appendChild(n)},n.embedCSRFToken=function(){var t=n.getCSRFToken();t&&Array.prototype.forEach.call(document.querySelectorAll("*[data-csrf='1']"),function(e){switch(e.nodeName){case"A":n.embedCSRFTokenToAnchor(e,t);break;case"FORM":n.embedCSRFTokenToForm(e,t)}})},connect.csrf=n}(this.self||global),function(){"use strict";var e={getDataAttributes:function(e){return!!e&&{analyticsEndpoint:e.getAttribute("data-analyticsEndpoint"),jsonMessage:e.getAttribute("data-jsonMessage")}},send:function(e,t){e=e||{};var n=JSON.parse(e.jsonMessage);n.is_onload=t;t=new Date;n.client_ts=t.getTime();t=new XMLHttpRequest;t.onload=function(){},e.analyticsEndpoint&&(t.open("POST",e.analyticsEndpoint,!0),t.setRequestHeader("Content-type","text/plain"),t.send(JSON.stringify(n)))},sendClientEvent:function(e,t){t=t||{};var n=JSON.parse(e.jsonMessage),i=new Date;n.src_type="GC",n.event_id="ClientAnalyticsEvent",n.client_ts=i.getTime(),n.label=t.label,n.payload=t.params;t=new XMLHttpRequest;t.onload=function(){},e.analyticsEndpoint&&(t.open("POST",e.analyticsEndpoint,!0),t.setRequestHeader("Content-type","text/plain"),t.send(JSON.stringify(n)))}};connect.heartbeat=e}(this.self||global),function(){"use strict";var s={},e="redirect_completed";s.redirect=function(){if(!s.isMarkedRedirectCompleted()){var t={},e=document.getElementById("mobage-connect-app-shellapp-sdk-ios-redirect-redirector-params"),n=e.getAttribute("data-query-string");n&&(t=connect.util.decodeQuery("&",n.substr(1)));var i=location.hash;if(i){var o,r=connect.util.decodeQuery("&",i.substr(1));for(o in r)t[o]=r[o]}var a={};["code","id_token","access_token","token_type","expires_in","state","session_state","scope","topic","sdk_name","sdk_version","error","error_description","grade"].forEach(function(e){t[e]&&(a[e]=t[e])});n=s.getAnalyticsEvents();n&&(a.analytics_events=n),connect.analytics.clearEvents();i=e.getAttribute("data-client-identifier"),n=t.bundle_identifier,e=t.topic||"authorization_response",e=s.getPathFromTopic(e),e=s.buildCustomURI(i,n,e,a);s.markRedirectCompleted(),location.href=e}},s.getPathFromTopic=function(e){return{authorization_response:"authorization_response_callback",authorization_error_response:"authorization_response_callback",uninstall_response:"uninstall_response_callback",uninstall_error_response:"uninstall_response_callback",logout_response:"logout_response_callback",logout_error_response:"logout_response_callback",user_upgrade_response:"user_upgrade_response_callback",user_upgrade_error_response:"user_upgrade_response_callback"}[e]},s.buildCustomURI=function(e,t,n,i){var o=document.createElement("a");return o.href="mobage-client-"+t+"://"+e+"/"+n,i&&(o.search=connect.util.encodeQuery("&",i)),o.href},s.markRedirectCompleted=function(){location.hash=e},s.isMarkedRedirectCompleted=function(){return location.hash.substr(1)===e},s.getAnalyticsEvents=function(){var t=connect.analytics.restoreEvents();try{return connect.util.encodeBase64URL(JSON.stringify(t))}catch(e){return console.log("JSON parse error: events = ",t),null}},connect.iosRedirector=s}(this.self||global),function(){"use strict";var e={},t="launch_complete";e.getDataAttributes=function(e){return!!e&&{analyticsEndpoint:e.getAttribute("data-analyticsEndpoint"),clientId:e.getAttribute("data-clientId"),packageName:e.getAttribute("data-packageName"),bundleIdentifier:e.getAttribute("data-bundleIdentifier"),jsonMessage:e.getAttribute("data-jsonMessage")}},e.send=function(e){e=e||{};var t=JSON.parse(e.jsonMessage),n=new Date;t.client_ts=n.getTime();n=new XMLHttpRequest;n.onload=function(){},e.analyticsEndpoint&&(n.open("POST",e.analyticsEndpoint,!0),n.setRequestHeader("Content-type","text/plain"),n.send(JSON.stringify(t)))},e.markCompleted=function(){location.hash=t},e.isMarkedCompleted=function(){return location.hash.substr(1)===t},connect.launchTracking=e}(this.self||global),function(){"use strict";var t={};t.redirectForRPAccount=function(){document.getElementById("mobage-connect-logout-confirm-form").addEventListener("submit",function(e){return e.preventDefault(),!1});var e=t.getDataAttributes();document.getElementById("mobage-connect-logout-confirm-execute").addEventListener("click",function(){location.href=e.executeUri}),document.getElementById("mobage-connect-logout-confirm-cancel").addEventListener("click",function(){location.href=e.cancelUri})},t.getDataAttributes=function(){var e=document.getElementById("mobage-connect-logout-confirm");return{executeUri:e.getAttribute("data-executeUri"),cancelUri:e.getAttribute("data-cancelUri"),postLogoutRedirectUri:e.getAttribute("data-postLogoutRedirectUri")}},connect.logoutConfirm=t}(this.self||global),function(){"use strict";var e={},n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";e.generateId=function(){for(var e="",t=0;t<32;++t)e+=n[Math.floor(Math.random()*n.length)];return e},e.send=function(e,t){var n=window.opener||window.parent;n&&(t.topic?(e={id:t.id||connect.notification.generateId(),type:"notification",topic:t.topic,extra:e},n.postMessage(e,t.originUri),t.callerFocus&&n.focus(),t.windowClose&&window.close()):console.error("notification.send: topic not specified"))},connect.notification=e}(this.self||global),function(){"use strict";var t={isiOSShellAppSDK:function(){return navigator.userAgent.match(/Mobage-ShellApp-SDK-iOS/)},isAndroidShellAppSDK:function(){return navigator.userAgent.match(/Mobage-ShellApp-SDK-Android/)},isAndroidShellAppSDKExternalBrowser:function(){var e=connect.util.decodeQuery("&",location.search.substr(1));return t.hasAndroidShellAppSDKName(e)},hasAndroidShellAppSDKName:function(e){if(e.sdk_name&&"mobage-shellapp-sdk-android"===e.sdk_name)return!0;if(e.post_login_redirect_uri){e=e.post_login_redirect_uri,e=connect.util.decodeQuery("&",e.substr(e.indexOf("?")+1));return t.hasAndroidShellAppSDKName(e)}return!1}};connect.platform=t}(),function(){"use strict";var r={getDataAttributes:function(){var e=document.getElementById("mobage-connect-post-message");return!!e&&{origin:e.getAttribute("data-originUri"),message:JSON.parse(e.getAttribute("data-jsonMessage"))}},send:function(e,t,n){if(e=e||{},!t||!n){var i=r.getDataAttributes();if(!i)return;t=i.message,n=i.origin}var o=window.opener||window.parent;o.postMessage(t,n),window.setTimeout(function(){e.callerFocus&&o.focus(),e.windowClose&&window.close()},1e3)}};connect.postMessage=r}(this.self||global),function(){"use strict";var e={};e.getResponseParams=function(){return connect.util.getResponseParams("mobage-connect-app-jssdk-redirect-relay-params")},e.notifyResponse=function(){if(window.opener||window.parent!==window){var e=connect.relay.getResponseParams(),t=e.client_origin_uri;if(!t)return console.error("client_origin_uri is omitted."),void window.close();var n,i={},o=["access_token","token_type","expires_in","code","id_token","scope","state","session_state","error","error_description","session_token_kid"];for(n in o)e[o[n]]&&(i[o[n]]=e[o[n]]);connect.notification.send(i,{topic:e.topic||"authorization_response",originUri:t}),window.opener&&window.top===window&&window.close()}else window.close()},connect.relay=e}(this.self||global),function(){"use strict";var r={};r.checkSessionStateChange=function(e){var t=(e=e||{}).clientId,n=e.sessionState,i=e.clientOrigin,o=e.notificationId;window.parent!==window?(e=connect.util.decodeQuery("; ",document.cookie).CSSID,t=CryptoJS.SHA256(t+":"+e).toString(),(e={}).status=t===n?"unchanged":"changed",e.sessionState=t,o&&(e.notificationId=o),e.thirdPartyCookieAvailable=r.isThirdPartyCookieAvailable(t),window.parent.postMessage({type:"notification",topic:"session_state_change_response",extra:e},i)):window.close()},r.isThirdPartyCookieAvailable=function(e){document.cookie=e+"=dmyvalue";var t=!!connect.util.decodeQuery("; ",document.cookie)[e],n=new Date;return n.setTime(0),document.cookie=e+"=;expires="+n,t},connect.sessionState=r}(this.self||global),function(e){"use strict";e={store:e.localStorage,setItem:function(e,t){try{this.store.setItem(e,JSON.stringify(t))}catch(e){console.log("connect.storge: setItem error = ",e)}},getItem:function(e){var t=this.store.getItem(e),e=null;if(null===t)return null;try{e=JSON.parse(t)}catch(e){return console.log("mobage.storage: JSON parse error: jsonItem = ",t),null}return e},removeItem:function(e){try{this.store.removeItem(e)}catch(e){console.log("connect.storge: removeItem error = ",e)}}};connect.storage=e}(this.self||global),function(){"use strict";var e={isChromeapps:function(e){return/Chromeapp/i.test(e)}};connect.userAgent=e}(this.self||global),function(){"use strict";var e={decodeQuery:function(e,t){return t.split(e).map(function(e){return e.split("=",2)}).reduce(function(e,t){return 0<t[0].length&&(e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])),e},{})},encodeQuery:function(e,t){var n,i=[];for(n in t)i.push(n+"="+t[n]);return i.join(e)},encodeBase64URL:function(e){try{return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}catch(e){return console.log("encodeBase64URL error:",e),null}},getResponseParams:function(e){var t={},e=document.getElementById(e);if(e){var n=e.getAttribute("data-query-string"),i=connect.util.decodeQuery("&",n.substring(1));for(o in i)t[o]=i[o]}n=window.location.hash;if(n){var o,r=connect.util.decodeQuery("&",n.substring(1));for(o in r)t[o]=r[o]}return t}};connect.util=e}(),function(){"use strict";var e={visibleListeners:[],hiddenListeners:[]};e.prefix="hidden"in document?"":"webkitHidden"in document?"webkit":null,e.addVisibleListener=function(e){this.visibleListeners.push(e)},e.addHiddenListener=function(e){this.hiddenListeners.push(e)},e.removeAllListeners=function(){this.visibleListeners=[],this.hiddenListeners=[]},e.handleEvent=function(t){this.isVisibleEvent(t.type)?this.visibleListeners.forEach(function(e){e.apply(null,t)}):this.isHiddenEvent(t.type)&&this.hiddenListeners.forEach(function(e){e.apply(null,t)})},e.getCurrentState=function(){return 0===this.prefix.length?document.visibilityState:document[this.prefix+"VisibilityState"]},e.isVisibleEvent=function(e){return"focus"===e||e===this.prefix+"visibilitychange"&&"visible"===this.getCurrentState()},e.isHiddenEvent=function(e){return"blur"===e||e===this.prefix+"visibilitychange"&&"hidden"===this.getCurrentState()},e.init=function(){"string"==typeof e.prefix?document.addEventListener(this.prefix+"visibilitychange",this):(window.addEventListener("focus",this),window.addEventListener("blur",this))},connect.visibility=e}(this.self||global),function(){"use strict";connect.chromeapps.openInBrowser=function(e){window.open(e+"?"+connect.util.encodeQuery("&",{_mobage_chromeapps_open_in_browser:1}))}}(this.self||global),function(){"use strict";var a={};a.getResponseParams=function(){return connect.util.getResponseParams("mobage-connect-app-chromeapps-sdk-redirect-redirector-params")},a.redirect=function(){var e=a.getResponseParams(),t=e.chromeapp_id;if(!t)return console.error("chromeapp_id is omitted."),void window.close();var n,i={},o=["access_token","token_type","expires_in","code","id_token","scope","state","session_state","error","error_description"];for(n in o)e[o[n]]&&(i[o[n]]=e[o[n]]);var r=e.topic||"authorization_response";a.sendMessage(t,r,i,function(){console.log("window.close()!!!!"),window.close()})},a.sendMessage=function(e,t,n,i){n={id:connect.notification.generateId(),type:"notification",topic:t,extra:n};console.log("sendMessage. message: ",n),chrome.runtime.sendMessage(e,n,i)},connect.chromeapps.redirector=a}(this.self||global),function(){"use strict";var e={},i={facebook:"facebook.com",google:"google.com",twitter:"twitter.com",yahoo:"yahoo.co.jp",apple:"apple.com",line:"line.me"};e.processSuccess=function(e){location.reload()},e.processError=function(){document.createElement("li").innerHTML=data.errorDescription;var e=document.getElementById("error-messages");e&&e.appendChild(e)},e.initListener=function(e){var t,n=document.getElementById(e+"-connect-button");n&&(t="/federate/redirect?"+connect.util.encodeQuery("&",{identity_provider:i[e]}),n.addEventListener("click",function(){window.open(t)}));e=document.getElementById(e+"-disconnect-button");e&&e.addEventListener("click",function(e){window.confirm("連携を解除しますか？")||e.preventDefault()})},e.initOpenInBrowserForChromeApp=function(){var e=location.origin+"/account_setting",t=document.getElementById("mobage-connect-account-setting-link-for-chromeapp");t&&t.addEventListener("click",function(){return connect.chromeapps.openInBrowser(e)})},e.init=function(){connect.userAgent.isChromeapps(navigator.userAgent)&&e.initOpenInBrowserForChromeApp(),e.initListener("facebook"),e.initListener("google"),e.initListener("twitter"),e.initListener("yahoo"),e.initListener("apple"),e.initListener("line"),window.addEventListener("message",function(t){["federate_redirect_response"].some(function(e){return e===t.data.topic})&&(t.data.error?e.processError():e.processSuccess())},!1)},connect.pages.accountManager=e}(),function(){"use strict";function r(e){return e=parseInt(e,10),isNaN(e)?0:e}var e={};e.initRegisterForm=function(o){o.addEventListener("submit",function(){var e=document.createElement("input"),t=r(o.year.value),n=r(o.month.value),i=r(o.day.value);return e.type="hidden",e.name="birthday",e.value=("000"+t).slice(-4)+"-"+("0"+n).slice(-2)+"-"+("0"+i).slice(-2),o.appendChild(e),!1},!1)},e.init=function(){var e=document.getElementById("mobage-connect-federated-register-form");e&&connect.pages.federatedRegister.initRegisterForm(e)},connect.pages.federatedRegister=e}(this.self||global),function(){"use strict";var n={init:function(){for(var e=document.getElementsByClassName("login-devices-open-detail"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){n.toggleDetail(e,this)});document.getElementById("login-devices-delete-button").addEventListener("click",function(e){n.confirm(e)})},toggleDetail:function(e,t){var n="login-devices-detail-"+t.getAttribute("data-session-id"),i=document.getElementById(n),o=i.className,n=t.getElementsByClassName("btn-login-devices-detail")[0],t=n.className;-1!==o.indexOf("d-none")?(o=o.replace("d-none",""),i.setAttribute("class",o),n.setAttribute("class",t+=" is-open")):(i.setAttribute("class",o+=" d-none"),t=t.replace("is-open",""),n.setAttribute("class",t))},confirm:function(e){var t=document.getElementById("login-devices-delete");if(!window.confirm("全ての端末のログインを取り消しますか？"))return!1;t.submit()}};connect.pages.loginDevices=n}(),function(){"use strict";var r={isAllInputValid:function(){var e=r.subjectId.checkValidity()&&r.subjectPassword.checkValidity();return r.captcha?e&&r.captcha.checkValidity():e},formValueChangeListener:function(){r.isAllInputValid()?r.loginButton.removeAttribute("disabled"):r.loginButton.setAttribute("disabled","")},isGeneratingCaptcha:!1,initCaptchaReloadButton:function(){document.getElementById("login-form-reload").addEventListener("click",function(){var n=document.getElementById("captcha-image"),i=document.getElementById("captcha"),o=document.getElementById("captcha-state");if(n&&i&&o||location.reload(),r.isGeneratingCaptcha)return!1;r.isGeneratingCaptcha=!0,http.request({method:"POST",url:"/captcha/regenerate",parameters:{captcha_state:o.value},headers:{}},function(e,t){!e&&t.body&&t.body.captcha_image_url&&t.body.captcha_state?(n.src=t.body.captcha_image_url,o.value=t.body.captcha_state,i.value="",i.focus(),r.isGeneratingCaptcha=!1):location.reload()})})},initAnalyticsEvents:function(){connect.analytics.sendEvent("load"),connect.analyticsOld.notify("LOGIN_FORM_SHOW"),connect.chrome.disableButtonsOnSubmit(r.loginForm),window.addEventListener("unload",function(){connect.analytics.sendEvent("unload")},!1);var e=document.getElementById("register");e&&e.addEventListener("click",function(){connect.analytics.sendEvent("register"),connect.analyticsOld.notify("REGISTRATION_SEND")})},initYjtag:function(e){var t=document.createElement("script");t.id="tagjs",t.async=!0,t.src="//s.yjtag.jp/tag.js#site=wOZbjM3",document.body.appendChild(t)},addFormValueChangeListener:function(){connect.chrome.addMultiEventsListener(r.subjectId,["focus","blur","input"],r.formValueChangeListener),connect.chrome.addMultiEventsListener(r.subjectPassword,["blur","input"],r.formValueChangeListener),r.captcha&&connect.chrome.addMultiEventsListener(r.captcha,["blur","input"],r.formValueChangeListener)},initRefresh:function(){setTimeout(function(){r.refresh()},6e5),"string"==typeof connect.visibility.prefix&&(connect.visibility.init(),connect.visibility.addVisibleListener(function(){r.refresh()})),r.loginButton.addEventListener("click",function(){connect.visibility.removeAllListeners()})},refresh:function(){var e;r.shouldFederateMobage?(e=connect.util.decodeQuery("&",location.search.substr(1))).post_login_redirect_uri&&e.sig&&e.iat&&e.seed&&(location.href="/federated/login/mobage"+location.search):location.reload()},initLoginForm:function(e){r.loginButton=document.getElementById("login"),r.subjectId=document.getElementById("subject-id"),r.subjectPassword=document.getElementById("subject-password"),r.captcha=document.getElementById("captcha"),r.shouldFederateMobage="1"===e.getAttribute("data-should-federate-mobage"),r.captcha&&r.initCaptchaReloadButton(),r.initAnalyticsEvents(),r.initYjtag(e),r.initRefresh()},initLoginContinue:function(){document.getElementById("login-required-continue-button").addEventListener("click",function(){window.open("/login/redirect")}),window.addEventListener("message",function(e){"login_redirect_complete"===e.data.topic&&location.reload()},!1)},init:function(){var e=document.getElementById("mobage-connect-login-form");e?r.initLoginForm(e):r.initLoginContinue()},onRecaptchaChecked:function(){var e=document.getElementById("mobage-connect-login-form"),t=document.createElement("input");t.type="hidden",t.name="login",t.value="login",e.appendChild(t),e.submit()}};connect.pages.login=r}(),function(){"use strict";var e={initRegisterForm:function(o){o.addEventListener("submit",function(){var e=document.createElement("input"),t=isNaN(o.year.value)?0:parseInt(o.year.value),n=isNaN(o.month.value)?0:parseInt(o.month.value),i=isNaN(o.day.value)?0:parseInt(o.day.value);return e.type="hidden",e.name="birthday",e.value=("000"+t).slice(-4)+"-"+("0"+n).slice(-2)+"-"+("0"+i).slice(-2),o.appendChild(e),!1},!1)},init:function(){var e=document.getElementById("mobage-connect-user-upgrade-standard-form");e&&connect.pages.userUpgradeStandard.initRegisterForm(e)}};connect.pages.userUpgradeStandard=e}(this.self||global);var dispatcher=new MicroDispatcher;dispatcher.register("/login",function(){connect.pages.login.init(),connect.chrome.disableButtonsOnSubmit("mobage-connect-login-form"),window.onRecaptchaChecked=connect.pages.login.onRecaptchaChecked}),dispatcher.register("/connect/1.0/services/authorize",function(){document.getElementById("mobage-connect-authorize-consent-skip")?setTimeout(function(){document.getElementById("mobage-connect-authorize-consent-form").submit()},1e3):(connect.analytics.sendEvent("load"),connect.analyticsOld.notify("AUTHORIZATION_CONSENT_SHOW"),connect.chrome.disableButtonsOnSubmit("mobage-connect-authorize-consent-form"),window.addEventListener("unload",function(){connect.analytics.sendEvent("unload")},!1))}),dispatcher.register("/connect/1.0/services/uninstall",function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-uninstall-confirm-form")}),dispatcher.register("/uninstall",function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-uninstall-confirm-form")}),dispatcher.register("/login/redirect",function(){connect.postMessage.send({windowClose:1,callerFocus:1})}),dispatcher.register("/federate/redirect",function(){connect.postMessage.send({windowClose:1,callerFocus:1})}),dispatcher.register("/connect/:version/clients/:client_identifier/jssdk/redirect",function(){window.addEventListener("load",function(){var e=document.getElementById("notify-response-button");e&&e.addEventListener("click",function(){connect.relay.notifyResponse()});e=connect.relay.getResponseParams();"authorization_response"===e.topic&&"true"!==e.window_close||connect.relay.notifyResponse()})}),dispatcher.register("/connect/:version/clients/:client_identifier/android/redirect",function(){window.addEventListener("load",function(){connect.androidRedirector.redirect()})}),dispatcher.register("/connect/:version/clients/:client_identifier/ios/redirect",function(){window.addEventListener("load",function(){connect.iosRedirector.redirect()})}),dispatcher.register("/connect/:version/clients/:client_identifier/chromeapps/redirect",function(){window.addEventListener("load",function(){connect.chromeapps.redirector.redirect()})}),dispatcher.register("/connect/:version/jssdk/session_iframe",function(){window.addEventListener("message",function(e){connect.sessionState.checkSessionStateChange({clientId:e.data.clientId,sessionState:e.data.sessionState,notificationId:e.data.notificationId,clientOrigin:e.origin})})}),dispatcher.register("/connect/:version/jssdk/heartbeat_iframe",function(){var e=document.getElementById("mobage-connect-heartbeat"),t=connect.heartbeat.getDataAttributes(e),n=connect.util.decodeQuery("; ",document.cookie).CSSID;connect.heartbeat.send(t,1),setInterval(function(){var e=connect.util.decodeQuery("; ",document.cookie).CSSID;n!==e&&location.reload(),connect.heartbeat.send(t,0)},3e4),window.addEventListener("message",function(e){connect.heartbeat.sendClientEvent(t,e.data)},!1)}),dispatcher.register("/launch_tracking",function(){var e=document.getElementById("mobage-connect-shellapp-sdk-launch-tracking"),e=connect.launchTracking.getDataAttributes(e);connect.launchTracking.isMarkedCompleted()||(connect.launchTracking.send(e),connect.launchTracking.markCompleted(),e=e.bundleIdentifier?connect.iosRedirector.buildCustomURI(e.clientId,e.bundleIdentifier,""):connect.androidRedirector.buildIntentSchemeURI(e.clientId,e.packageName,""),location.href=e)}),dispatcher.register("/logout",function(){document.getElementById("mobage-connect-logout-iframe")?connect.logoutIframe.createIframe():document.getElementById("mobage-connect-logout-confirm")&&connect.logoutConfirm.redirectForRPAccount(),connect.chrome.disableButtonsOnSubmit("mobage-connect-logout-confirm-form"),connect.chrome.disableButtonsOnSubmit("mobage-connect-session-chooser-form"),window.addEventListener("message",function(e){connect.logoutIframe.redirect()})}),dispatcher.register(/^\/password\/.*/,function(){var e=document.getElementById("window-close-button");e&&e.addEventListener("click",function(){window.close(),setTimeout(function(){e.innerText="この画面が自動で閉じない場合は、ブラウザのタブから閉じてください"},1e3)});var i,o,r,a,s,c,d,t,n,u,l=document.getElementById("mobage-connect-password-edit-form");l&&(i=document.getElementById("update"),o=document.getElementById("subject-password"),r=document.getElementById("subject-password-for-confirmation"),a=document.getElementById("nickname"),s=document.getElementById("year"),c=document.getElementById("additional-information-type-nickname"),d=document.getElementById("additional-information-type-birthday"),t=document.getElementById("area-nickname"),n=document.getElementById("area-birthday"),H5F.setup(l,{validClass:"is-valid",invalidClass:"is-invalid"}),l.addEventListener("submit",function(){var e,t;return d.checked&&((e=document.createElement("input")).type="hidden",e.name="birthday",t=l.year.value+"-"+("0"+l.month.value).slice(-2)+"-"+("0"+l.day.value).slice(-2),e.value=t,l.appendChild(e)),!1}),u=function(){var e,t=c.checked,n=d.checked;t&&(e=a.checkValidity()),(e=n?s.checkValidity():e)&&o.checkValidity()&&r.checkValidity()?i.removeAttribute("disabled"):i.setAttribute("disabled","")},c.addEventListener("click",function(){s.removeAttribute("required"),a.setAttribute("required",""),t.className="",n.className="d-none",u()}),d.addEventListener("click",function(){a.removeAttribute("required"),s.setAttribute("required",""),t.className="d-none",n.className="",u()}),o.addEventListener("focus",u),o.addEventListener("blur",u),o.addEventListener("input",u),r.addEventListener("focus",u),r.addEventListener("blur",u),r.addEventListener("input",u),a.addEventListener("blur",u),a.addEventListener("input",u),s.addEventListener("blur",u),s.addEventListener("input",u),a.setAttribute("required",""),connect.chrome.disableButtonsOnSubmit(l))}),dispatcher.register(/^\/federated\/register\/.*/,function(){connect.pages.federatedRegister.init()}),dispatcher.register(/^\/user_upgrade\/standard\/.*|^\/register\/.*/,function(){connect.pages.userUpgradeStandard.init()}),dispatcher.register(/^\/debug\/session(\/.*)?/,function(){document.getElementById("mobage-connect-debug-session-cookie").innerText=document.cookie.replace(/(;)?\s+/g,"\n")}),dispatcher.register("/account_manager",function(){connect.pages.accountManager.init()}),dispatcher.register("/yahoo_agreement",function(){connect.pages.accountManager.init()}),dispatcher.register("/account/login_devices",function(){connect.pages.loginDevices.init()}),dispatcher.register(/^\/account\/email(\/.*)?/,function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-account-email-form")}),dispatcher.register(/^\/account\/password(\/.*)?/,function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-account-password-form")}),dispatcher.register(/^\/account\/security_question(\/.*)?/,function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-account-security-question-form")}),dispatcher.register("/pincode",function(){connect.chrome.disableButtonsOnSubmit("mobage-connect-pincode-form")}),document.addEventListener("DOMContentLoaded",function(){connect.csrf.embedCSRFToken();var e,t=document.getElementById("mobage-connect-authorization-response-form");t&&(e=parseInt(t.getAttribute("data-submit-delay"),0),setTimeout(function(){t.submit()},e));var n=document.getElementById("window-close-button");n&&n.addEventListener("click",function(){window.close(),setTimeout(function(){n.innerText=platform.isAndroidShellAppSDK()||platform.isiOSShellAppSDK()?"この画面が自動で閉じない場合は、アプリを再起動してください":"この画面が自動で閉じない場合は、ブラウザのタブから閉じてください"},1e3)}),dispatcher.dispatch(location.pathname)});